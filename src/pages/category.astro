---
import { getCollection } from "astro:content";
import Layout from "../layouts/main.astro";
import PageHeading from "../components/page-heading.astro";
import { getAllCategories } from "../utils/category.js";

const allPosts = await getCollection("post");
const categories = getAllCategories(allPosts);
---

<Layout title="Categories">
  <section class="relative z-20 max-w-2xl mx-auto my-12 px-7 lg:px-0">
    <PageHeading
      title="Category"
      description="Browse posts by category"
      titleKey="nav.category"
      descKey="nav.category.desc"
    />

    <div class="z-50 grid grid-cols-1 sm:grid-cols-2 gap-4 my-8">
      {
        categories.map((category) => (
          <a
            href={`/category/${category.slug}`}
            class="relative border border-transparent border-dashed cursor-pointer p-6 group rounded-2xl hover:-translate-x-1 hover:-translate-y-1 transition-transform"
          >
            <div class="absolute inset-0 z-20 w-full h-full duration-300 ease-out bg-white border border-dashed dark:bg-neutral-950 rounded-2xl border-neutral-300 dark:border-neutral-600 group-hover:-translate-x-1 group-hover:-translate-y-1" />
            <div class="absolute inset-0 z-10 w-full h-full duration-300 ease-out border border-dashed rounded-2xl border-neutral-300 dark:border-neutral-600 group-hover:translate-x-1 group-hover:translate-y-1" />
            <div class="relative z-30">
              <h2 data-i18n={`nav.category.${category.slug}`} class="text-xl font-bold text-neutral-900 dark:text-neutral-100 mb-2">
                {category.displayName}
              </h2>
              <p data-i18n={`nav.category.${category.slug}.desc`} class="text-sm text-neutral-600 dark:text-neutral-400 mb-2">
                {category.displayName}
              </p>
              <p class="text-xs text-neutral-500 dark:text-neutral-500">
                {category.count} {category.count === 1 ? "post" : "posts"}
              </p>
            </div>
          </a>
        ))
      }
    </div>
  </section>
</Layout>
