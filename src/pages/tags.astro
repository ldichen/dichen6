---
import { getCollection } from "astro:content";
import Layout from "../layouts/main.astro";
import PageHeading from "../components/page-heading.astro";
import { getAllTags } from "../utils/category.js";

const allPosts = await getCollection("post");
const tags = getAllTags(allPosts);
---

<Layout title="Tags">
  <section class="relative z-20 max-w-2xl mx-auto my-12 px-7 lg:px-0">
    <PageHeading
      title="Tags"
      description="Browse posts by tag"
      titleKey="tags.title"
      descKey="tags.description"
    />

    <div class="z-50 flex flex-wrap gap-3 my-8">
      {
        tags.map((tag) => (
          <a
            href={`/tag/${tag.slug}`}
            class="relative px-3 py-1.5 text-sm border border-dashed border-neutral-300 dark:border-neutral-700 rounded text-neutral-700 dark:text-neutral-300 hover:border-neutral-400 dark:hover:border-neutral-600 hover:bg-neutral-50 dark:hover:bg-neutral-900 transition-all duration-200"
          >
            #{tag.name}
            <span class="ml-1.5 text-xs text-neutral-500 dark:text-neutral-500">({tag.count})</span>
          </a>
        ))
      }
    </div>

    {tags.length === 0 && (
      <p class="text-center text-neutral-600 dark:text-neutral-400 my-8">
        No tags found. Add tags to your posts in the frontmatter.
      </p>
    )}
  </section>
</Layout>
